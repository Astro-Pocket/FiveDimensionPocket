<h1>我的清單</h1>
<div class="container">
  <div class="row cards-area" id="card-wrap">
    <% @articles.each do |article| %>
    <div class="card col-3 card-title-search" style="width:100%" data-title="<%= article.title %>">
      <div>
        <%= link_to (image_tag(article.images[2], style:'width:100%', class:"card-img-top") if article.article_images.attached?), article_path(article.id) %>
      </div>
    
      <div class="card-body">
        <h5>
          <%= link_to article.title, article_path(article.id), class:"card-title card-title-search", data:{title: article.title} %>
        </h5>
        <p class="card-text"><%= article.short_description %></p>  
        <div class="icon-bar" data-controller="tag">
              <div data-controller="favorite">
                <a class="card-btn" data-action="favorite#heart"><i class="far fa-heart" data-target="favorite.icon"></i></a>
                <input type="hidden" name="" data-target="favorite.article_id" value="<%= article.id %>">
              </div>
              <div data-controller="read">
                <a class="card-btn" data-action="read#check"><i class="far fa-check-square" data-target="read.icon"></i></a>
                <input type="hidden" name="" data-target="read.article_id" value="<%= article.id %>">
              </div>
              <input type="hidden" data-target="tag.articleId" value="<%= article.id %>"> 
              <a class="card-btn" data-action="tag#editTag"><i class="fas fa-tag"></i></a>
                <a class="card-btn"><i class="fas fa-save"></i></a>
                <div class="shared-btn-wrap">
                  <button class="card-btn shared-btn js-collapse-btn"><i class="fas fa-share-alt"></i></button>
                  <div class="shared-bar share-btn-collapse" style="background-color: pink;">
                  
                  <!-- 複製連結 -->
                    
                      <button class="shared-conect-btn">複製連結</button>
                      <input type="hidden" class="copylink" value="<%= article.link %>">
                    
                    
                    <!-- Load Facebook SDK for JavaScript -->
                      <div id="fb-root"></div>
                      <script>(function(d, s, id) {
                        var js, fjs = d.getElementsByTagName(s)[0];
                        if (d.getElementById(id)) return;
                        js = d.createElement(s); js.id = id;
                        js.src = "https://connect.facebook.net/en_US/sdk.js#xfbml=1&version=v3.0";
                        fjs.parentNode.insertBefore(js, fjs);
                      }(document, 'script', 'facebook-jssdk'));</script>

<div class="row">
  <% @articles.each do |article| %>
  <div class="card col-3">
    <a href="<%= article.link %>" target="_blank">
       <%= image_tag(article.images[2], size:'300x200') if article.article_images.attached? %>
    </a>
    <div class="card-body">
      <a href="<%= article.link %>" target="_blank" class="card-text"><%= article.domain %></a>
      <a href="<%= article.link %>" target="_blank"><h5 class="card-title"><%= article.title %></h5></a>
      <p class="card-text"><%= article.title %></p>  
      <div class="icon-bar" data-controller="tag publish">
        <span data-controller="favorite">
          <a class="card-btn" data-action="favorite#heart"><i class="far fa-heart" data-target="favorite.icon"></i></a>
          <input type="hidden" name="" data-target="favorite.article_id" value="<%= article.id %>">
        </span>
        <span data-controller="read">
          <a class="card-btn" data-action="read#check"><i class="far fa-book-open" data-target="read.icon"></i></a>
          <input type="hidden" name="" data-target="read.article_id" value="<%= article.id %>">
        </span>
        <input type="hidden" data-target="tag.articleId publish.articleId" value="<%= article.id %>"> 
        <a class="card-btn" data-action="tag#editTag"><i class="fas fa-tag"></i></a>
        <a class="card-btn" data-action="publish#check">
          <% if article.published == true %>
            <i class="fas fa-unlock-alt" data-target="publish.icon"></i>
          <% else %>
            <i class="fas fa-lock" data-target="publish.icon"></i>
          <% end %>
        </a>
        
          <!-- <div class="shared-btn-wrap">
            <button class="card-btn shared-btn" @click="item.showSharedBar = !item.showSharedBar"><i class="fas fa-share-alt"></i></button>
            <div v-if="item.showSharedBar" class="shared-bar">
              <button class="shared-conect-btn">複製連結</button>
              <button class="shared-conect-btn">分享到twitter</button>
              <button class="shared-conect-btn">分享到facebook</button>
              <button class="shared-conect-btn">分享到line</button>
            </div>
          </div> -->
      </div> 
    </div>
    <% end %>
  </div>


<template id="tagSelect">
    <select name="article[tag_list][]" multiple="multiple" class="form-control">
    </select>
</template>  
